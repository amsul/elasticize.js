/*!
    elasticize.js v2.0
    By Amsul (http://amsul.ca)

    Updated: 07 October, 2012

    (c) Amsul Naeem, 2012 - http://amsul.ca
    Licensed under MIT ("expat" flavour) license.
    Hosted on http://github.com/amsul/elasticize.js
*/
(function(e,c,a,f){var b=function(g,i){var h={},j=function(){},k;if(g.type!=="textarea"){return false}j.options=e.extend({},e.fn.elasticize.defaults,i);k=j.prototype={constructor:j,create:function(l){h.HEIGHT=d(l,"height");h.MIN_HEIGHT=h.HEIGHT;h.PADDING_BOTTOM=j.options.paddingBottom;j._textarea=l;j.$textarea=e(l).css({boxSizing:"border-box",resize:"none",overflow:"hidden",verticalAlign:"top",transition:"all "+j.options.transition+"s linear",minHeight:h.MIN_HEIGHT+"px"}).on({"keydown keyup change cut":k.onChange,"input paste":k.onPaste,focusin:k.onFocus,focusout:k.onBlur});j.$clone=j.$textarea.clone().css({height:0}).attr({tabindex:-1,disabled:true});j._clone=j.$clone[0];h.CLONE_SCROLL_HEIGHT=j._clone.scrollHeight;j.$textarea.after(j.$clone.wrap('<div style="height:0;overflow:hidden">').parent());return k},update:function(){var n,m=j._clone,l=j._textarea;m.value=l.value;n=m.scrollHeight+h.PADDING_BOTTOM;if(h.CLONE_SCROLL_HEIGHT!==n){console.log(h.CLONE_SCROLL_HEIGHT,n);h.CLONE_SCROLL_HEIGHT=n;h.HEIGHT=(h.CLONE_SCROLL_HEIGHT>h.MIN_HEIGHT)?h.MIN_HEIGHT+(m.scrollHeight-m.clientHeight):h.MIN_HEIGHT;l.style.minHeight=h.HEIGHT+"px"}return k},expand:function(){h.MIN_HEIGHT+=h.PADDING_BOTTOM;h.CLONE_SCROLL_HEIGHT+=h.PADDING_BOTTOM;k.update();return k},shrink:function(){h.MIN_HEIGHT-=h.PADDING_BOTTOM;h.CLONE_SCROLL_HEIGHT-=h.PADDING_BOTTOM;k.update();return k},onFocus:function(l){k.expand();return this},onBlur:function(l){k.shrink();return this},onChange:function(l){k.update();return this},onPaste:function(l){setTimeout(k.update,0);return this}};return new j().create(g)};e.fn.elasticize=function(g){return this.each(function(){if(!e.data(this,"elasticized")){e.data(this,"elasticized",new b(this,g))}return this})};e.fn.elasticize.defaults={paddingBottom:20,transition:0.15};function d(g,h){return parseInt(getComputedStyle(g,null).getPropertyValue(h),10)}})(jQuery,window,document);